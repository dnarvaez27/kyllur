{"version":3,"sources":["NavigationBar/ChangeLocation/ChangeLocation.jsx","NavigationBar/About/About.jsx","NavigationBar/DataShow/DataShow.jsx","NavigationBar/Queries/Queries.jsx","NavigationBar/NavigationBar.jsx","Modal/Modal.jsx","StarMap/StarMap.jsx","FullModal/FullModal.jsx","App.jsx","serviceWorker.js","index.js"],"names":["ChangeLocation","currentLocation","changeLocation","cancel","useState","latitude","setLatitude","longitude","setLongitude","id","title","onClick","navigator","geolocation","getCurrentPosition","p","coords","console","error","className","type","placeholder","value","onChange","e","target","About","close","rel","href","DataShow","data","state","view","satellites","setState","useEffect","prev","stars","changeView","attr","map","i","key","satname","intDesignator","launchDate","nombre","masa","descubrimiento","tipo_deteccion","mapView","Queries","queries","reverse","q","NavigationBar","openModal","openFullModal","accuracy","position","setPosition","showAbout","undefined","closeFullModal","closeOr","st","or","Modal","open","content","settings","radius","color","StarMap","satelites","canvasRef","useRef","ctx","current","getContext","center","window","innerHeight","clearRect","context","beginPath","fillStyle","arc","Math","PI","fill","drawCenter","forEach","point","xcoord","ycoord","drawSatelite","canvasPosition","x","y","drawStar","ref","width","height","FullModal","wssURI","process","URL","log","App","modalState","setModalState","fullModalState","setFullModalState","ready","setReady","ws","setWs","setQueries","initialFetch","nWs","WebSocket","particlesJS","load","onopen","send","onclose","onerror","err","onmessage","ev","msg","JSON","parse","LIVE","LOCATIONS","coordinates","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.d782dc33.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ChangeLocation.css';\r\n\r\nconst ChangeLocation = ({ currentLocation, changeLocation, cancel }) => {\r\n\r\n  const [latitude, setLatitude] = useState(currentLocation.latitude);\r\n  const [longitude, setLongitude] = useState(currentLocation.longitude);\r\n\r\n  const getCurrent = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(p => {\r\n        setLatitude(p.coords.latitude);\r\n        setLongitude(p.coords.longitude);\r\n      });\r\n    } else {\r\n      console.error('No geolocation');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"changelocation-container\">\r\n      <div>\r\n        <span>Change Location</span>\r\n        <button title=\"Current Position\" onClick={getCurrent}>\r\n          <i className=\"fas fa-crosshairs\" />\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <label>\r\n          <span>\r\n            <i className=\"fas fa-map-marker-alt\" />\r\n            Latitude\r\n          </span>\r\n          <input type=\"number\" placeholder=\"latitude\" value={latitude} onChange={e => setLatitude(+e.target.value)} />\r\n        </label>\r\n        <label>\r\n          <span>\r\n            <i className=\"fas fa-map-marker-alt\" />\r\n            Longitude\r\n          </span>\r\n          <input type=\"number\" placeholder=\"longitude\" value={longitude} onChange={e => setLongitude(+e.target.value)} />\r\n        </label>\r\n      </div>\r\n      <div>\r\n        <button onClick={() => cancel()}>Cancel</button>\r\n        <button onClick={() => changeLocation({ latitude, longitude })}>Change</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nChangeLocation.propTypes = {\r\n  currentLocation: PropTypes.object,\r\n  changeLocation: PropTypes.func.isRequired,\r\n  cancel: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ChangeLocation;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './About.css';\r\n\r\nconst About = ({ close }) => {\r\n  return (\r\n    <div id=\"about\">\r\n      <span>Kyllur</span>\r\n      <div>\r\n        <span>Why Kyllur?</span>\r\n        <span>\r\n          The name comes frome the sound of <i>quyllur</i> from Quechuan language that stands for star.\r\n          We want to popularize native languages with amazing words!\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <span>The project</span>\r\n        <span>\r\n          Initially this project starts as a University project for ISIS-3710 Web development.\r\n          However, we want to power this tool up to explore things in the sky beyond our sight.\r\n          We want you to explore the sky above you, explore the stars and satellites above a location\r\n          , we will show you this objects in real time*\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <span>What we use?</span>\r\n        <span>\r\n          We are using <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.n2yo.com/\">N2YO</a> for accessing satellites location in real time, \r\n          our own database in Mongo to store around 3K stars coordinates in the space and some maths to paint them in a canvas. PS: If you let us we also use your location ;)\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <span>Who are we?</span>\r\n        <span>\r\n          We are <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://pedrito.dev\">Pedro Salazar</a> & <a target=\"_blank\" href=\"https://dnarvaez27.github.io/\" rel=\"noopener noreferrer\">David Narvaez</a>\r\n          <span>. Two students who start projects until the last minute since 90's</span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nAbout.propTypes = {\r\n  close: PropTypes.func.isRequired\r\n};\r\n\r\nexport default About;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './DataShow.css';\r\n\r\nconst DataShow = ({ data }) => {\r\n  const [state, setState] = useState({ state: 0, view: data.satellites });\r\n\r\n  useEffect(() => {\r\n    setState(prev => {\r\n      return {\r\n        state: prev.state,\r\n        view: prev.state === 0 ? data.satellites : data.stars\r\n      }\r\n    })\r\n  }, [data]);\r\n\r\n  const changeView = (state, attr) => {\r\n    return () => setState({ state, view: data[attr] });\r\n  };\r\n\r\n  const mapView = (e, key) => {\r\n    if (state.state === 0) {\r\n      return (\r\n        <div key={`sat_${key}`}>\r\n          <span>{`Satelite ${e.satname}`}</span>\r\n          <span>\r\n            <i className=\"fas fa-globe-americas\" />\r\n            <span>{e.intDesignator}</span>\r\n          </span>\r\n          <span>\r\n            <i className=\"fas fa-rocket\" />\r\n            <span>{e.launchDate}</span>\r\n          </span>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div key={`star_${key}`}>\r\n          <span>{`Star ${e.nombre}`}</span>\r\n          <span>{`Mass ${e.masa}`}</span>\r\n          <span>{e.descubrimiento}</span>\r\n          <span>{e.tipo_deteccion}</span>\r\n          <div>\r\n            <button>\r\n              <i className=\"fas fa-heart\" />\r\n              <i className=\"far fa-heart\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"datashow-container\">\r\n      <div>\r\n        <div>\r\n          <button className={state.state === 0 ? 'active' : ''} onClick={changeView(0, 'satellites')}>Satellites</button>\r\n          <button className={state.state === 1 ? 'active' : ''} onClick={changeView(1, 'stars')}>Stars</button>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        {state.view.map((e, i) => mapView(e, i))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nDataShow.propTypes = {\r\n  data: PropTypes.object.isRequired\r\n}\r\n\r\nexport default DataShow;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Queries.css';\r\n\r\nconst Queries = ({ queries }) => {\r\n\r\n  return (\r\n    <div id=\"queries-container\">\r\n      {queries.reverse().map((q, i) => (\r\n        <div key={`cord_${i}`}>\r\n          <span>({q.latitude}, {q.longitude})</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nQueries.propTypes = {\r\n  queries: PropTypes.array.isRequired\r\n}\r\n\r\nexport default Queries;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './NavigationBar.css';\r\nimport ChangeLocation from './ChangeLocation/ChangeLocation';\r\nimport About from './About/About';\r\nimport DataShow from './DataShow/DataShow';\r\nimport Queries from './Queries/Queries';\r\n\r\nconst NavigationBar = ({ openModal, openFullModal, changeLocation, data, queries }) => {\r\n\r\n  const [position, setPosition] = useState({ latitude: 0, longitude: 0, accuracy: 0 });\r\n  const [state, setState] = useState(-1);\r\n\r\n  useEffect(() => {\r\n    if (state === 2) {\r\n      openFullModal(true, <Queries queries={queries} />);\r\n    }\r\n  }, [queries]);\r\n\r\n  useEffect(() => {\r\n    changeLocation(position);\r\n  }, [position]);\r\n\r\n  useEffect(() => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(p => {\r\n        setPosition({ latitude: p.coords.latitude, longitude: p.coords.longitude });\r\n      });\r\n    } else {\r\n      console.error('No geolocation');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (state === 3) {\r\n      openFullModal(true, <DataShow data={data} />);\r\n    }\r\n  }, [state, data]);\r\n\r\n  const showChangeLocation = () => {\r\n    openModal(true, <ChangeLocation\r\n      currentLocation={position}\r\n      changeLocation={(p) => {\r\n        setPosition(p);\r\n        openModal(false, undefined);\r\n      }}\r\n      cancel={() => openModal(false, undefined)} />);\r\n  };\r\n\r\n  const showAbout = () => {\r\n    setState(1);\r\n    openFullModal(true, <About close={() => openModal(false, undefined)} />);\r\n  };\r\n\r\n  const showData = () => {\r\n    setState(3);\r\n    openFullModal(true, <DataShow data={data} />);\r\n  };\r\n\r\n  const showQueries = () => {\r\n    setState(2);\r\n    openFullModal(true, <Queries queries={queries} />);\r\n  };\r\n\r\n  const closeFullModal = () => {\r\n    setState(-1);\r\n    openFullModal(false, undefined);\r\n  }\r\n\r\n  const closeOr = (st, or) => {\r\n    return (state !== st\r\n      ? (or)\r\n      : (<><i className=\"fas fa-times-circle\" /><span>Close</span></>)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    showAbout();\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"nav-bar\">\r\n      <div id=\"search-container\">\r\n        <button onClick={showChangeLocation}>\r\n          <i className=\"fas fa-search\" />\r\n          <span>Change Location</span>\r\n        </button>\r\n        <button onClick={state !== 1 ? showAbout : closeFullModal} className={state === 1 ? 'active' : ''}>\r\n          {closeOr(1, (\r\n            <>\r\n              <i className=\"fas fa-question-circle\" />\r\n              <span>About</span>\r\n            </>\r\n          ))}\r\n        </button>\r\n      </div>\r\n      <div id=\"footer-container\">\r\n        <button onClick={state !== 2 ? showQueries : closeFullModal} className={state === 2 ? 'active' : ''}>\r\n          {closeOr(2, (\r\n            <>\r\n              <i className=\"fas fa-stream\" />\r\n              <span>Queries</span>\r\n            </>\r\n          ))}\r\n        </button>\r\n        <button onClick={state !== 3 ? showData : closeFullModal} className={state === 3 ? 'active' : ''}>\r\n          {closeOr(3, (\r\n            <>\r\n              <i className=\"fas fa-info-circle\" />\r\n              <span>Data</span>\r\n            </>\r\n          ))}\r\n        </button>\r\n      </div>\r\n    </div >\r\n  );\r\n};\r\n\r\nNavigationBar.propTypes = {\r\n  openModal: PropTypes.func.isRequired,\r\n  openFullModal: PropTypes.func.isRequired,\r\n  changeLocation: PropTypes.func.isRequired,\r\n  data: PropTypes.object.isRequired,\r\n  queries: PropTypes.array.isRequired\r\n};\r\n\r\nexport default NavigationBar;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Modal.css';\r\n\r\nconst Modal = ({ open, content }) => {\r\n  return (\r\n    <div id=\"modal\" className={!open ? 'hidden' : ''}>\r\n      <div id=\"modal-bg\" />\r\n      <div id=\"modal-content\">{content}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nModal.propTypes = {\r\n  open: PropTypes.bool.isRequired,\r\n  content: PropTypes.object\r\n}\r\n\r\nexport default Modal;","import React, { useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './StarMap.css';\r\n\r\nconst settings = {\r\n  user: {\r\n    radius: 8,\r\n    color: '#F25A38'\r\n  },\r\n  satellite: {\r\n    radius: 3,\r\n    color: '#06ABC2'\r\n  },\r\n  star: {\r\n    radius: 1,\r\n    color: '#FFFFFF'\r\n  }\r\n};\r\n\r\nconst StarMap = ({ satelites, stars }) => {\r\n  const canvasRef = useRef(null)\r\n\r\n  const drawCenter = (context, center) => {\r\n    context.beginPath();\r\n    context.fillStyle = settings.user.color\r\n    context.arc(center, center, settings.user.radius, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n  const drawSatelite = (context, center, xcoord, ycoord) => {\r\n    context.beginPath();\r\n    context.fillStyle = settings.satellite.color;\r\n    context.arc(xcoord + center, ycoord + center, settings.satellite.radius, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n  const drawStar = (context, center, xcoord, ycoord) => {\r\n    context.beginPath();\r\n    context.fillStyle = settings.star.color;\r\n    context.arc(xcoord + center, ycoord + center, settings.star.radius, 0, 2 * Math.PI);\r\n    context.fill();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    const center = (window.innerHeight - 40) / 2\r\n    ctx.clearRect(0, 0, center * 2, center * 2);\r\n    drawCenter(ctx, center);\r\n\r\n    satelites.forEach(point => drawSatelite(ctx, center, point.canvasPosition.x, point.canvasPosition.y));\r\n    stars.forEach(point => drawStar(ctx, center, point.canvasPosition.x, point.canvasPosition.y));\r\n\r\n  }, [satelites, stars]);\r\n\r\n  return (\r\n    <canvas\r\n    id=\"star-canvas\"\r\n      ref={canvasRef}\r\n      width={window.innerHeight - 40}\r\n      height={window.innerHeight - 40} />\r\n  );\r\n}\r\n\r\nStarMap.propTypes = {\r\n  satelites: PropTypes.array,\r\n  stars: PropTypes.array\r\n}\r\n\r\nexport default StarMap;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './FullModal.css';\r\n\r\nconst FullModal = ({ open, content }) => {\r\n  return (\r\n    <div id=\"fullmodal\" className={!open ? 'hidden' : ''}>\r\n      {content}\r\n    </div>\r\n  );\r\n};\r\n\r\nFullModal.propTypes = {\r\n  open: PropTypes.bool.isRequired,\r\n  content: PropTypes.object\r\n}\r\n\r\nexport default FullModal;","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport NavigationBar from './NavigationBar/NavigationBar';\nimport Modal from './Modal/Modal';\nimport StarMap from './StarMap/StarMap';\nimport FullModal from './FullModal/FullModal';\n\nconst wssURI = process.env.URL || 'wss://kyllur.herokuapp.com/ws';\nconsole.log(`WSS URL ${wssURI}`);\n\n\nconst App = () => {\n\n  const [modalState, setModalState] = useState({ open: false, content: undefined });\n  const [fullModalState, setFullModalState] = useState({ open: false, content: undefined });\n  const [state, setState] = useState({ stars: [], satellites: [] });\n  const [position, setPosition] = useState({ stars: [], satellites: [] });\n  const [ready, setReady] = useState(false);\n  const [ws, setWs] = useState(null);\n  const [queries, setQueries] = useState([]);\n\n  let initialFetch = null;\n  useEffect(() => {\n    const nWs = new WebSocket(wssURI);\n    setWs(nWs);\n    window.particlesJS.load('particles-js', '/particles.json', () => { });\n  }, []);\n\n  useEffect(() => {\n    if (ws) {\n      ws.onopen = () => {\n        setReady(true);\n        console.log('WS: Connected');\n        ws.send('SUBSCRIBE;locations');\n        if (initialFetch) {\n          initialFetch();\n        }\n      };\n      ws.onclose = () => console.log('WS: Closed');\n      ws.onerror = (err) => console.log('WS: Error', err);\n      ws.onmessage = ev => {\n        const msg = JSON.parse(ev.data);\n        if ('LIVE' in msg) {\n          setState(msg.LIVE);\n        } else if ('LOCATIONS' in msg) {\n          setQueries(msg.LOCATIONS);\n        } else {\n          console.log(msg);\n        }\n        // console.log(`WS: Message ${JSON.stringify(msg)}`);\n      }\n    }\n  }, [ws, initialFetch]);\n\n  const openModal = (state, content) => {\n    setModalState({ open: state, content });\n  };\n\n  const openFullModal = (state, content) => {\n    setFullModalState({ open: state, content });\n  };\n\n  const changeLocation = (position) => {\n    if (ready) {\n      setPosition(position);\n      ws.send(`LOCATION;${position.latitude};${position.longitude}`);\n    } else {\n      initialFetch = () => {\n        setPosition(position);\n        ws.send(`LOCATION;${position.latitude};${position.longitude}`);\n      }\n    }\n  };\n\n  return (\n    <div id=\"main-container\">\n      <NavigationBar openModal={openModal} openFullModal={openFullModal} changeLocation={changeLocation} data={state} queries={queries} />\n      <StarMap satelites={state.satellites} stars={state.stars} coordinates={position} />\n      <Modal open={modalState.open} content={modalState.content} />\n      <FullModal open={fullModalState.open} content={fullModalState.content} />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}