"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};

var __importStar = void 0 && (void 0).__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) {
    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
  }
  result["default"] = mod;
  return result;
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

var http_errors_1 = __importDefault(require("http-errors"));

var express_1 = __importStar(require("express"));

var path_1 = require("path");

var cookie_parser_1 = __importDefault(require("cookie-parser"));

var morgan_1 = __importDefault(require("morgan"));

var index_1 = __importDefault(require("./routes/index"));

var app = express_1["default"]();
app.use(morgan_1["default"]('dev'));
app.use(express_1.json());
app.use(express_1.urlencoded({
  extended: false
}));
app.use(cookie_parser_1["default"]());
app.use(express_1["static"](path_1.join(__dirname, 'front/build')));
app.use('/', index_1["default"]); // catch 404 and forward to error handler

app.use(function (req, res, next) {
  next(http_errors_1["default"](404));
}); // error handler

app.use(function (err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {}; // render the error page

  res.status(err.status || 500);
  res.render('error');
});
exports["default"] = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3RzL2FwcC5qcyJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiX19pbXBvcnRTdGFyIiwicmVzdWx0IiwiayIsIk9iamVjdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaHR0cF9lcnJvcnNfMSIsInJlcXVpcmUiLCJleHByZXNzXzEiLCJwYXRoXzEiLCJjb29raWVfcGFyc2VyXzEiLCJtb3JnYW5fMSIsImluZGV4XzEiLCJhcHAiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwiam9pbiIsIl9fZGlybmFtZSIsInJlcSIsInJlcyIsIm5leHQiLCJlcnIiLCJsb2NhbHMiLCJtZXNzYWdlIiwiZXJyb3IiLCJnZXQiLCJzdGF0dXMiLCJyZW5kZXIiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLElBQUlBLGVBQWUsR0FBSSxVQUFRLFNBQUtBLGVBQWQsSUFBa0MsVUFBVUMsR0FBVixFQUFlO0FBQ25FLFNBQVFBLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFaLEdBQTBCRCxHQUExQixHQUFnQztBQUFFLGVBQVdBO0FBQWIsR0FBdkM7QUFDSCxDQUZEOztBQUdBLElBQUlFLFlBQVksR0FBSSxVQUFRLFNBQUtBLFlBQWQsSUFBK0IsVUFBVUYsR0FBVixFQUFlO0FBQzdELE1BQUlBLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFmLEVBQTJCLE9BQU9ELEdBQVA7QUFDM0IsTUFBSUcsTUFBTSxHQUFHLEVBQWI7QUFDQSxNQUFJSCxHQUFHLElBQUksSUFBWCxFQUFpQixLQUFLLElBQUlJLENBQVQsSUFBY0osR0FBZDtBQUFtQixRQUFJSyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLElBQXRCLENBQTJCUCxHQUEzQixFQUFnQ0ksQ0FBaEMsQ0FBSixFQUF3Q0QsTUFBTSxDQUFDQyxDQUFELENBQU4sR0FBWUosR0FBRyxDQUFDSSxDQUFELENBQWY7QUFBM0Q7QUFDakJELEVBQUFBLE1BQU0sQ0FBQyxTQUFELENBQU4sR0FBb0JILEdBQXBCO0FBQ0EsU0FBT0csTUFBUDtBQUNILENBTkQ7O0FBT0FFLE1BQU0sQ0FBQ0csY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBTUMsYUFBYSxHQUFHWixlQUFlLENBQUNhLE9BQU8sQ0FBQyxhQUFELENBQVIsQ0FBckM7O0FBQ0EsSUFBTUMsU0FBUyxHQUFHWCxZQUFZLENBQUNVLE9BQU8sQ0FBQyxTQUFELENBQVIsQ0FBOUI7O0FBQ0EsSUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsTUFBRCxDQUF0Qjs7QUFDQSxJQUFNRyxlQUFlLEdBQUdoQixlQUFlLENBQUNhLE9BQU8sQ0FBQyxlQUFELENBQVIsQ0FBdkM7O0FBQ0EsSUFBTUksUUFBUSxHQUFHakIsZUFBZSxDQUFDYSxPQUFPLENBQUMsUUFBRCxDQUFSLENBQWhDOztBQUNBLElBQU1LLE9BQU8sR0FBR2xCLGVBQWUsQ0FBQ2EsT0FBTyxDQUFDLGdCQUFELENBQVIsQ0FBL0I7O0FBQ0EsSUFBTU0sR0FBRyxHQUFHTCxTQUFTLFdBQVQsRUFBWjtBQUNBSyxHQUFHLENBQUNDLEdBQUosQ0FBUUgsUUFBUSxXQUFSLENBQWlCLEtBQWpCLENBQVI7QUFDQUUsR0FBRyxDQUFDQyxHQUFKLENBQVFOLFNBQVMsQ0FBQ08sSUFBVixFQUFSO0FBQ0FGLEdBQUcsQ0FBQ0MsR0FBSixDQUFRTixTQUFTLENBQUNRLFVBQVYsQ0FBcUI7QUFBRUMsRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBckIsQ0FBUjtBQUNBSixHQUFHLENBQUNDLEdBQUosQ0FBUUosZUFBZSxXQUFmLEVBQVI7QUFDQUcsR0FBRyxDQUFDQyxHQUFKLENBQVFOLFNBQVMsVUFBVCxDQUFpQkMsTUFBTSxDQUFDUyxJQUFQLENBQVlDLFNBQVosRUFBdUIsYUFBdkIsQ0FBakIsQ0FBUjtBQUNBTixHQUFHLENBQUNDLEdBQUosQ0FBUSxHQUFSLEVBQWFGLE9BQU8sV0FBcEIsRSxDQUNBOztBQUNBQyxHQUFHLENBQUNDLEdBQUosQ0FBUSxVQUFDTSxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxFQUFvQjtBQUN4QkEsRUFBQUEsSUFBSSxDQUFDaEIsYUFBYSxXQUFiLENBQXNCLEdBQXRCLENBQUQsQ0FBSjtBQUNILENBRkQsRSxDQUdBOztBQUNBTyxHQUFHLENBQUNDLEdBQUosQ0FBUSxVQUFDUyxHQUFELEVBQU1ILEdBQU4sRUFBV0MsR0FBWCxFQUFnQkMsSUFBaEIsRUFBeUI7QUFDN0I7QUFDQUQsRUFBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVdDLE9BQVgsR0FBcUJGLEdBQUcsQ0FBQ0UsT0FBekI7QUFDQUosRUFBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVdFLEtBQVgsR0FBbUJOLEdBQUcsQ0FBQ1AsR0FBSixDQUFRYyxHQUFSLENBQVksS0FBWixNQUF1QixhQUF2QixHQUF1Q0osR0FBdkMsR0FBNkMsRUFBaEUsQ0FINkIsQ0FJN0I7O0FBQ0FGLEVBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXTCxHQUFHLENBQUNLLE1BQUosSUFBYyxHQUF6QjtBQUNBUCxFQUFBQSxHQUFHLENBQUNRLE1BQUosQ0FBVyxPQUFYO0FBQ0gsQ0FQRDtBQVFBekIsT0FBTyxXQUFQLEdBQWtCUyxHQUFsQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0W1wiZGVmYXVsdFwiXSA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgaHR0cF9lcnJvcnNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiaHR0cC1lcnJvcnNcIikpO1xyXG5jb25zdCBleHByZXNzXzEgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImV4cHJlc3NcIikpO1xyXG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwicGF0aFwiKTtcclxuY29uc3QgY29va2llX3BhcnNlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjb29raWUtcGFyc2VyXCIpKTtcclxuY29uc3QgbW9yZ2FuXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm1vcmdhblwiKSk7XHJcbmNvbnN0IGluZGV4XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vcm91dGVzL2luZGV4XCIpKTtcclxuY29uc3QgYXBwID0gZXhwcmVzc18xLmRlZmF1bHQoKTtcclxuYXBwLnVzZShtb3JnYW5fMS5kZWZhdWx0KCdkZXYnKSk7XHJcbmFwcC51c2UoZXhwcmVzc18xLmpzb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzc18xLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKGNvb2tpZV9wYXJzZXJfMS5kZWZhdWx0KCkpO1xyXG5hcHAudXNlKGV4cHJlc3NfMS5zdGF0aWMocGF0aF8xLmpvaW4oX19kaXJuYW1lLCAnZnJvbnQvYnVpbGQnKSkpO1xyXG5hcHAudXNlKCcvJywgaW5kZXhfMS5kZWZhdWx0KTtcclxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcclxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIG5leHQoaHR0cF9lcnJvcnNfMS5kZWZhdWx0KDQwNCkpO1xyXG59KTtcclxuLy8gZXJyb3IgaGFuZGxlclxyXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICAvLyBzZXQgbG9jYWxzLCBvbmx5IHByb3ZpZGluZyBlcnJvciBpbiBkZXZlbG9wbWVudFxyXG4gICAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XHJcbiAgICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge307XHJcbiAgICAvLyByZW5kZXIgdGhlIGVycm9yIHBhZ2VcclxuICAgIHJlcy5zdGF0dXMoZXJyLnN0YXR1cyB8fCA1MDApO1xyXG4gICAgcmVzLnJlbmRlcignZXJyb3InKTtcclxufSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGFwcDtcclxuIl19